<% content_for :title, "Browse" %>
<% content_for :page_title, "Browse" %>
<% content_for :page_actions do %>
  <%= link_to new_note_path, class: "btn-primary inline-flex items-center gap-1.5" do %>
    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
    </svg>
    Add
  <% end %>
<% end %>

<%# Full-viewport three-panel layout %>
<div class="-m-6 flex h-[calc(100vh-57px)]" data-controller="browser resizable">
  <%# Left sidebar %>
  <div class="flex-shrink-0 overflow-hidden" style="width: 250px;" data-resizable-target="panel" data-resizable-min="180" data-resizable-max="400">
    <%= render "notes/browser_sidebar" %>
  </div>

  <%# Resize handle %>
  <div class="resize-handle" data-action="mousedown->resizable#startResize" data-resizable-target="handle"></div>

  <%# Main content: toolbar + table + preview %>
  <div class="flex-1 flex flex-col min-w-0">
    <%# Toolbar %>
    <%= render "notes/browser_toolbar" %>

    <%# Table + Preview split %>
    <div class="flex-1 flex flex-col min-h-0">
      <%# Results table %>
      <%= render "notes/browser_table" %>

      <%# Preview panel %>
      <%= render "notes/card_preview" %>
    </div>
  </div>
</div>
