<% content_for :title, "Trash" %>
<% content_for :page_title, "Trash" %>

<% type_filters = ["all", "note", "card", "deck", "note_type"] %>
<% type_labels = { "all" => "All", "note" => "Notes", "card" => "Cards", "deck" => "Decks", "note_type" => "Note Types" } %>

<div class="space-y-6">
  <div class="flex items-center gap-1">
    <% type_filters.each do |f| %>
      <%= link_to type_labels[f], deletion_logs_path(filter: f), class: @filter == f ? "pill-active" : "pill-inactive" %>
    <% end %>
  </div>

  <p class="text-sm text-gray-500">Items in trash can be restored or permanently deleted.</p>

  <% if @logs.any? %>
    <div class="card p-0">
      <div class="overflow-x-auto">
        <table class="w-full text-sm">
          <thead>
            <tr class="border-b border-gray-200">
              <th class="text-left py-2 px-3 text-xs font-medium text-gray-500 uppercase">Type</th>
              <th class="text-left py-2 px-3 text-xs font-medium text-gray-500 uppercase">Summary</th>
              <th class="text-left py-2 px-3 text-xs font-medium text-gray-500 uppercase">Deleted Date</th>
              <th class="text-right py-2 px-3 text-xs font-medium text-gray-500 uppercase">Actions</th>
            </tr>
          </thead>
          <tbody>
            <% @logs.each do |log| %>
              <tr class="border-b border-gray-100 hover:bg-gray-50">
                <td class="py-2 px-3">
                  <span class="inline-flex items-center gap-1.5 text-xs font-medium px-2 py-0.5 rounded-full
                    <%= case log.object_type
                        when 'note' then 'bg-blue-100 text-blue-800'
                        when 'card' then 'bg-green-100 text-green-800'
                        when 'deck' then 'bg-purple-100 text-purple-800'
                        when 'note_type' then 'bg-orange-100 text-orange-800'
                        end %>">
                    <%= log.object_type.titleize %>
                  </span>
                </td>
                <td class="py-2 px-3 text-gray-900 font-medium"><%= log.summary %></td>
                <td class="py-2 px-3 text-gray-500"><%= log.deleted_at.strftime("%Y-%m-%d %H:%M") %></td>
                <td class="py-2 px-3 text-right">
                  <div class="inline-flex items-center gap-2">
                    <%= button_to "Restore", restore_deletion_log_path(log), method: :post, class: "btn-secondary text-xs px-2 py-1" %>
                    <%= link_to "View", deletion_log_path(log), class: "text-xs text-blue-600 hover:text-blue-700 font-medium" %>
                  </div>
                </td>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>
    </div>
  <% else %>
    <div class="card text-center py-12">
      <h3 class="text-sm font-medium text-gray-900 mb-1">Trash is empty</h3>
      <p class="text-sm text-gray-500">No deleted items to show.</p>
    </div>
  <% end %>
</div>
