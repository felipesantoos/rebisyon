<%# Sidebar navigation - Anki-style %>
<aside class="w-64 bg-white border-r border-gray-200 flex flex-col" data-controller="mobile-menu" data-mobile-menu-target="sidebar">
  <%# Logo/Brand %>
  <div class="p-4 border-b border-gray-200">
    <%= link_to root_path, class: "flex items-center gap-2 text-xl font-bold text-gray-900 hover:text-blue-600 transition-colors" do %>
      <svg class="w-7 h-7 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"/>
      </svg>
      Rebisyon
    <% end %>
  </div>

  <%# Navigation %>
  <nav class="flex-1 p-3 space-y-5 overflow-y-auto">
    <%# Study section %>
    <div>
      <h3 class="px-3 text-xs font-semibold text-gray-400 uppercase tracking-wider mb-2">Study</h3>
      <div class="space-y-0.5">
        <%= link_to dashboard_path, class: "sidebar-link #{'sidebar-link-active' if current_page?(dashboard_path) || current_page?(root_path)}" do %>
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/>
          </svg>
          Decks
        <% end %>
      </div>
    </div>

    <%# Manage section %>
    <div>
      <h3 class="px-3 text-xs font-semibold text-gray-400 uppercase tracking-wider mb-2">Manage</h3>
      <div class="space-y-0.5">
        <%= link_to new_note_path, class: "sidebar-link #{'sidebar-link-active' if current_page?(new_note_path)}" do %>
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 4v16m8-8H4"/>
          </svg>
          Add
        <% end %>
        <%= link_to notes_path, class: "sidebar-link #{'sidebar-link-active' if request.path.start_with?('/notes') && !current_page?(new_note_path)}" do %>
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M4 6h16M4 12h16M4 18h7"/>
          </svg>
          Browse
        <% end %>
        <%= link_to note_types_path, class: "sidebar-link #{'sidebar-link-active' if request.path.start_with?('/note_types')}" do %>
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"/>
          </svg>
          Note Types
        <% end %>
      </div>
    </div>

    <%# Tools section %>
    <div>
      <h3 class="px-3 text-xs font-semibold text-gray-400 uppercase tracking-wider mb-2">Tools</h3>
      <div class="space-y-0.5">
        <%= link_to statistics_path, class: "sidebar-link #{'sidebar-link-active' if request.path.start_with?('/statistics')}" do %>
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
          </svg>
          Statistics
        <% end %>
        <%= link_to media_path, class: "sidebar-link #{'sidebar-link-active' if request.path.start_with?('/media')}" do %>
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
          </svg>
          Media
        <% end %>
        <%= link_to filtered_decks_path, class: "sidebar-link #{'sidebar-link-active' if request.path.start_with?('/filtered_decks')}" do %>
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"/>
          </svg>
          Filtered Decks
        <% end %>
        <%= link_to shared_decks_path, class: "sidebar-link #{'sidebar-link-active' if request.path.start_with?('/shared_decks')}" do %>
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"/>
          </svg>
          Shared Decks
        <% end %>
        <%= link_to add_ons_path, class: "sidebar-link #{'sidebar-link-active' if request.path.start_with?('/add-ons')}" do %>
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M11 4a2 2 0 114 0v1a1 1 0 001 1h3a1 1 0 011 1v3a1 1 0 01-1 1h-1a2 2 0 100 4h1a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 01-1-1v-1a2 2 0 10-4 0v1a1 1 0 01-1 1H7a1 1 0 01-1-1v-3a1 1 0 00-1-1H4a2 2 0 110-4h1a1 1 0 001-1V7a1 1 0 011-1h3a1 1 0 001-1V4z"/>
          </svg>
          Add-ons
        <% end %>
        <%= link_to new_import_path, class: "sidebar-link #{'sidebar-link-active' if request.path.start_with?('/imports')}" do %>
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"/>
          </svg>
          Import
        <% end %>
        <%= link_to new_export_path, class: "sidebar-link #{'sidebar-link-active' if request.path.start_with?('/exports')}" do %>
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/>
          </svg>
          Export
        <% end %>
        <%= link_to backups_path, class: "sidebar-link #{'sidebar-link-active' if request.path.start_with?('/backups')}" do %>
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"/>
          </svg>
          Backups
        <% end %>
        <%= link_to deletion_logs_path, class: "sidebar-link #{'sidebar-link-active' if request.path.start_with?('/trash')}" do %>
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
          </svg>
          Trash
        <% end %>
        <%= link_to sync_metas_path, class: "sidebar-link #{'sidebar-link-active' if request.path.start_with?('/sync')}" do %>
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
          </svg>
          Sync
        <% end %>
      </div>
    </div>
  </nav>

  <%# User section %>
  <div class="p-3 border-t border-gray-200 bg-gray-50">
    <div class="flex items-center gap-3 px-2">
      <div class="w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center flex-shrink-0">
        <span class="text-sm font-medium text-blue-700"><%= current_user.email[0].upcase %></span>
      </div>
      <div class="flex-1 min-w-0">
        <p class="text-xs font-medium text-gray-900 truncate"><%= current_user.email %></p>
        <div class="flex items-center gap-2 text-xs">
          <%= link_to "Profiles", profiles_path, class: "text-gray-500 hover:text-blue-600" %>
          <span class="text-gray-300">|</span>
          <%= link_to "Preferences", edit_user_preferences_path, class: "text-gray-500 hover:text-blue-600" %>
          <span class="text-gray-300">|</span>
          <%= button_to "Sign out", destroy_user_session_path, method: :delete,
              class: "text-gray-500 hover:text-blue-600 bg-transparent border-none p-0 cursor-pointer text-xs" %>
        </div>
      </div>
    </div>
  </div>
</aside>
