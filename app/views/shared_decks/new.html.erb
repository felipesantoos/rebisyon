<% content_for :title, "Share a Deck" %>
<% content_for :page_title, "Share a Deck" %>
<% categories = SharedDeck.distinct.pluck(:category).compact.sort %>

<div class="max-w-2xl mx-auto space-y-6">
  <div class="card">
    <%= form_with model: @shared_deck do |form| %>
      <div class="space-y-4">
        <%# Deck selector %>
        <div>
          <label for="shared_deck_deck_id" class="form-label">Deck</label>
          <select id="shared_deck_deck_id" name="shared_deck[deck_id]" class="form-select w-full">
            <option value="">Select a deck...</option>
            <% @decks.each do |deck| %>
              <option value="<%= deck.id %>"><%= deck.full_name %></option>
            <% end %>
          </select>
        </div>

        <%# Name %>
        <div>
          <%= form.label :name, class: "form-label" %>
          <%= form.text_field :name, class: "form-input w-full", placeholder: "Enter a name for your shared deck" %>
        </div>

        <%# Description %>
        <div>
          <%= form.label :description, class: "form-label" %>
          <%= form.text_area :description, rows: 5, class: "form-input w-full", placeholder: "Describe your deck and what it covers..." %>
        </div>

        <%# Category %>
        <div>
          <%= form.label :category, class: "form-label" %>
          <select id="shared_deck_category" name="shared_deck[category]" class="form-select w-full">
            <option value="">Select a category...</option>
            <% categories.each do |category| %>
              <option value="<%= category %>"><%= category %></option>
            <% end %>
          </select>
        </div>

        <%# Public checkbox %>
        <div class="flex items-center">
          <%= form.check_box :is_public, class: "h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded" %>
          <%= form.label :is_public, "Make this deck publicly available", class: "ml-2 block text-sm text-gray-700" %>
        </div>

        <%# Actions %>
        <div class="flex items-center gap-3 pt-4 border-t border-gray-200">
          <%= form.submit "Share Deck", class: "btn-primary" %>
          <%= link_to "Cancel", shared_decks_path, class: "btn-secondary" %>
        </div>
      </div>
    <% end %>
  </div>
</div>
