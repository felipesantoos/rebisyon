<%= link_to shared_deck_path(deck), class: "card block hover:shadow-md transition-shadow" do %>
  <%# Category tag %>
  <div class="mb-2">
    <span class="tag-chip"><%= deck.category %></span>
  </div>

  <%# Title %>
  <h3 class="font-semibold text-lg text-gray-900 truncate"><%= deck.name %></h3>

  <%# Author %>
  <p class="text-gray-500 text-sm mt-0.5">by <%= deck.author.email %></p>

  <%# Description preview %>
  <p class="text-gray-600 text-sm mt-2 line-clamp-2"><%= deck.description %></p>

  <%# Footer: stars, downloads, size %>
  <div class="flex items-center gap-3 mt-3 pt-3 border-t border-gray-100 text-sm text-gray-500">
    <%# Star rating %>
    <span class="inline-flex items-center gap-1">
      <% stars = deck.rating_average || 0 %>
      <% full_stars = stars.floor %>
      <% has_half = (stars - full_stars) >= 0.5 %>
      <% (1..5).each do |i| %>
        <% if i <= full_stars %>
          <span class="text-yellow-400">&#9733;</span>
        <% elsif has_half && i == full_stars + 1 %>
          <span class="text-yellow-400">&#9733;</span>
        <% else %>
          <span class="text-gray-300">&#9733;</span>
        <% end %>
      <% end %>
      <span class="ml-0.5"><%= stars %></span>
    </span>

    <%# Downloads %>
    <span class="inline-flex items-center gap-1">
      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/>
      </svg>
      <%= number_with_delimiter(deck.download_count) %>
    </span>

    <%# Size %>
    <span><%= number_to_human_size(deck.package_size) %></span>
  </div>
<% end %>
